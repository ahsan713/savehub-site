<!DOCTYPE html>
<html lang="en" style="background-color:#0f172a;color:#fff;">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SaveHub – Smart tools. Real savings.</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", Roboto, "Helvetica Neue", sans-serif;
      background-color: #0f172a;
      color: #fff;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    /* Page layout */
    header {
      text-align: center;
      padding: 3rem 1rem 2rem;
      max-width: 800px;
      margin: 0 auto;
    }
    header h1 {
      font-size: clamp(1.5rem, 1vw + 1rem, 2rem);
      font-weight: 600;
      color: #fff;
      margin: 0 0 1rem;
    }
    header p {
      font-size: 1rem;
      font-weight: 400;
      color: #cbd5e1;
      margin: 0;
    }

    section.featured-wrap {
      max-width: 1200px;
      padding: 2rem 1rem 4rem;
      margin: 0 auto;
    }
    .featured-heading {
      color: #fff;
      font-size: .875rem;
      font-weight: 500;
      letter-spacing: .05em;
      text-transform: uppercase;
      margin-bottom: 1rem;
    }

    /* Card row */
    .cards-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    @media(min-width:768px){
      .cards-row { grid-template-columns: repeat(3,1fr); }
    }

    .card {
      background: radial-gradient(circle at 20% 20%, rgba(59,130,246,0.12) 0%, rgba(15,23,42,0) 70%), rgba(30,41,59,1);
      border: 1px solid rgba(148,163,184,0.15);
      border-radius: .75rem;
      padding: 1.5rem;
      box-shadow: 0 30px 80px rgba(0,0,0,0.8);
      position: relative;
      display: flex;
      flex-direction: column;
      min-height: 250px;
    }

    .pill {
      display: inline-block;
      font-size: .75rem;
      font-weight: 500;
      border-radius: 999px;
      padding: .25rem .5rem;
      line-height: 1.2;
      margin-bottom: .75rem;
    }
    .pill.blue   { background-color: rgba(37, 99, 235, .15);  color:#60a5fa; }
    .pill.green  { background-color: rgba(16,185,129,.15);   color:#6ee7b7; }
    .pill.purple { background-color: rgba(168,85,247,.15);   color:#d8b4fe; }

    .card h2 { margin: 0 0 .75rem; font-size: 1rem; font-weight: 600; color: #fff; }
    .card p  { margin: 0 0 1.25rem; font-size: .875rem; line-height: 1.5; color: #cbd5e1; }

    .cta-btn {
      display: inline-block;
      text-align: center;
      font-size: .875rem;
      font-weight: 500;
      line-height: 1.2;
      border-radius: .5rem;
      border: none;
      cursor: pointer;
      padding: .75rem 1rem;
      width: 100%;
      color: #fff;
    }
    .btn-savings        { background-color: #2563eb; }
    .btn-savings:hover  { background-color:#1d4ed8; }
    .btn-automation     { background-color:#065f46; }
    .btn-automation:hover { background-color:#064e3b; }
    .btn-bill           { background-color:#6b21a8; }
    .btn-bill:hover     { background-color:#581c87; }

    .footer-block {
      max-width: 800px;
      margin: 3rem auto 4rem;
      text-align: center;
      color:#fff;
    }
    .footer-block h3 { margin:0 0 1rem; font-size:1rem; font-weight:600; color:#fff; }
    .footer-block p  { color:#cbd5e1; font-size:.875rem; margin:0 auto 1.5rem; max-width:500px; line-height:1.5; }

    .footer-legal {
      text-align:center;
      font-size:.7rem;
      color:#64748b;
      padding-bottom:4rem;
      max-width:800px;
      margin:0 auto;
      line-height:1.4;
    }
    .footer-legal strong{ color:#94a3b8; font-weight:500; }

    /* ---------- MODAL ---------- */
    .modal-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.6);
      display: none; align-items: center; justify-content: center;
      z-index: 9999; padding: 1rem;
    }
    .modal {
      background-color:#1e2536; border-radius:.75rem; border:1px solid rgba(148,163,184,0.2);
      max-width: 360px; width:100%; padding:1.5rem;
      box-shadow:0 30px 80px rgba(0,0,0,0.8); position:relative; text-align:left; color:#fff;
    }
    .modal h4 { margin:0 0 .5rem; font-size:1rem; font-weight:600; color:#fff; }
    .modal p  { margin:0 0 1rem; font-size:.875rem; line-height:1.4; color:#cbd5e1; }
    .close-btn { background:none; border:none; color:#94a3b8; cursor:pointer; font-size:1rem;
      position:absolute; top:.75rem; right:.75rem; }
    .modal label{ display:block; color:#fff; font-size:.75rem; margin-bottom:.5rem; font-weight:500; }
    .modal input[type="text"],
    .modal input[type="email"]{
      width:100%; background-color:#0f172a; border:1px solid rgba(148,163,184,.4); border-radius:.5rem;
      color:#fff; font-size:.875rem; padding:.75rem .75rem; outline:none; margin-bottom:.75rem;
    }
    .modal input::placeholder{ color:#64748b; }
    .modal button.subscribe-submit{
      margin-top:.25rem; width:100%; background-color:#2563eb; border:none; color:#fff;
      border-radius:.5rem; font-size:.875rem; font-weight:500; line-height:1.2; padding:.75rem 1rem; cursor:pointer;
    }
    .modal button.subscribe-submit:hover{ background-color:#1d4ed8; }
    .confirm-msg{ font-size:.8rem; color:#34d399; margin-top:1rem; display:none; }
    .error-msg  { font-size:.8rem; color:#f87171; margin-top:1rem; display:none; }
  </style>
</head>

<body>
  <header>
    <h1>Smart tools. Real savings.</h1>
    <p>We find services and products that save you money or time. No hype. Only things worth paying for.</p>
  </header>

  <section class="featured-wrap">
    <div class="featured-heading">Featured Picks</div>

    <div class="cards-row">
      <!-- SAVINGS CARD -->
      <div class="card">
        <div class="pill blue">Popular</div>
        <h2>Save money on what you’re already buying</h2>
        <p>
          Access member-only discounts on travel, dining, shopping, tickets, and more.
          People save hundreds per year on normal everyday spend — without cutting lifestyle.
        </p>
        <button
          class="cta-btn btn-savings"
          data-source="savings"
          data-tag="savings_interest"
          data-redirect="https://go.savehub.site/saveclub"
        >
          Unlock savings
        </button>
      </div>

      <!-- AUTOMATION CARD -->
      <div class="card">
        <div class="pill green">New</div>
        <h2>Automate lead follow-up while you sleep</h2>
        <p>
          All-in-one marketing and automation platform for small businesses and agencies.
          Capture leads, auto-text them, book calls, and keep chasing revenue without you
          chasing people manually.
        </p>
        <button
          class="cta-btn btn-automation"
          data-source="automation"
          data-tag="automation_stack_interest"
          data-redirect="https://go.savehub.site/gohighlevel"
        >
          Try the automation stack
        </button>
      </div>

      <!-- BILL NEGOTIATION CARD -->
      <div class="card">
        <div class="pill purple">Save Money</div>
        <h2>Lower your internet or phone bill</h2>
        <p>
          Upload your bill. A negotiator fights the provider to get it lowered.
          If they can’t save you money, you don’t pay.
          Coming soon to SaveHub.
        </p>
        <button
          class="cta-btn btn-bill"
          data-source="bills"
          data-tag="bill_negotiation_interest"
          data-redirect=""
        >
          Get early access
        </button>
      </div>
    </div>
  </section>

  <section class="footer-block">
    <h3>Smart tools. Real savings.</h3>
    <p>
      Get 1–2 short picks a week: things that save you money or time. No spam.
      Only stuff we’d honestly pay for.
    </p>
  </section>

  <div class="footer-legal">
    <div><strong>SaveHub</strong></div>
    <div style="margin-top:.5rem;">
      Some recommendations include affiliate links. You will never be charged extra.
      We only list tools we would stand behind ourselves.
    </div>
  </div>

  <!-- MODAL -->
  <div class="modal-overlay" id="emailModalOverlay">
    <div class="modal" id="emailModal">
      <button class="close-btn" id="modalCloseBtn" aria-label="Close">✕</button>
      <h4>Where should we send it?</h4>
      <p>Drop your email and we’ll send you this pick — plus future savings you’ll actually care about.</p>

      <label for="leadFirstName">First name (optional)</label>
      <input type="text" id="leadFirstName" placeholder="Ahsan" />

      <label for="leadEmail">Email</label>
      <input type="email" id="leadEmail" placeholder="you@example.com" />

      <button class="subscribe-submit" id="modalSubmitBtn">Send it to me</button>

      <div class="confirm-msg" id="confirmMsg">You're in ✔ We'll send it over.</div>
      <div class="error-msg" id="errorMsg">Something went wrong. Please try again.</div>
    </div>
  </div>

  <!-- ========= FRONTEND LOGIC ========= -->
  <script>
    const SUBSCRIBE_ENDPOINT = "https://api.savehub.site/subscribe";

    const modalOverlay    = document.getElementById("emailModalOverlay");
    const modalCloseBtn   = document.getElementById("modalCloseBtn");
    const modalSubmitBtn  = document.getElementById("modalSubmitBtn");
    const leadEmailInput  = document.getElementById("leadEmail");
    const leadFirstInput  = document.getElementById("leadFirstName");
    const confirmMsg      = document.getElementById("confirmMsg");
    const errorMsg        = document.getElementById("errorMsg");

    let currentSource   = null;  // 'savings' | 'automation' | 'bills'
    let currentRedirect = null;
    let currentTag      = null;  // Brevo interest key

    function openModal(source, redirectUrl, tag) {
      currentSource   = source;
      currentRedirect = redirectUrl || "";
      currentTag      = tag || null;

      confirmMsg.style.display = "none";
      errorMsg.style.display   = "none";
      leadEmailInput.value     = "";
      leadFirstInput.value     = "";

      modalOverlay.style.display = "flex";
      leadEmailInput.focus();
    }

    function closeModal() {
      modalOverlay.style.display = "none";
    }

    modalCloseBtn.addEventListener("click", closeModal);
    modalOverlay.addEventListener("click", (e) => {
      if (e.target === modalOverlay) closeModal();
    });

    // Hook CTAs
    document.querySelectorAll(".cta-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const source   = btn.getAttribute("data-source");
        const redirect = btn.getAttribute("data-redirect") || "";
        const tag      = btn.getAttribute("data-tag") || null;
        openModal(source, redirect, tag);
      });
    });

    function showError(msg) {
      errorMsg.textContent     = msg;
      errorMsg.style.display   = "block";
      confirmMsg.style.display = "none";
    }

    function showSuccess(msg) {
      confirmMsg.textContent   = msg;
      confirmMsg.style.display = "block";
      errorMsg.style.display   = "none";
    }

    // Submit handler -> posts { email, firstName, tag, source }
    modalSubmitBtn.addEventListener("click", async () => {
      const email     = (leadEmailInput.value  || "").trim();
      const firstName = (leadFirstInput.value  || "").trim();

      if (!email) {
        showError("Please enter an email.");
        return;
      }

      if (!currentTag) {
        console.error("No tag set for this signup");
        showError("Something went wrong. Please refresh and try again.");
        return;
      }

      try {
        const resp = await fetch(SUBSCRIBE_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            email,
            firstName,
            tag: currentTag,
            source: currentSource
          })
        });

        const data = await resp.json();
        console.log("subscribe response:", resp.status, data);

        if (!resp.ok || data.error) {
          showError("Something went wrong. Please try again.");
          return;
        }

        showSuccess("You're in ✔ We'll send it over.");

        if (currentRedirect) {
          // Go to success page which handles UTM + redirect
          const url = `/success.html?product=${encodeURIComponent(currentSource || "")}&redirect=${encodeURIComponent(currentRedirect)}`;
          // small delay so user sees the green message
          setTimeout(() => { window.location.href = url; }, 800);
        } else {
          setTimeout(closeModal, 1200);
        }
      } catch (err) {
        console.error("subscribe failed:", err);
        showError("Something went wrong. Please try again.");
      }
    });
  </script>
</body>
</html>
